# ToiletNOW iOS App – Product Requirements Document (PRD)

<img src="ToiletNOW-moodboard.png"/>

## 1. Overview
**Purpose & Problem:** ToiletNOW is a mobile app designed to help users with urgent restroom needs (especially those with IBS, IBD such as Crohn’s or Ulcerative Colitis, or anxiety about finding toilets) locate the nearest available toilet **as quickly as possible**. The app addresses the anxiety and discomfort of not knowing where a restroom is when urgency strikes ([
      ‎Flush Toilet Finder & Map on the App Store
    ](https://apps.apple.com/gb/app/flush-toilet-finder-map/id955254528#:~:text=,Thank%20you%20to%20the%20developer)). By providing immediate navigation to a nearby facility and using humor and a friendly design, ToiletNOW aims to reassure users and reduce panic in high-stress moments.

**High-Level Concept:** The app instantly finds **the three nearest open toilets** and automatically navigates the user to the closest one, with minimal user input. A playful **3D clay-style mascot** greets the user on launch with a lighthearted message (e.g. *“You will make it in time, relax!”*), setting a reassuring tone. The experience is **streamlined for speed** (one-tap to navigate) and layered with a fun, gamified approach (achievements, a mascot) to transform an urgent, stressful situation into a more manageable and even uplifting experience.

**Goals & Differentiation:** Unlike generic map apps or basic toilet finders, ToiletNOW is tailored for users who often face *urgent* needs. It differentiates itself through: 

- **Speed:** zero typing required – the app auto-detects location and starts guidance immediately.
- **Reliability:** focus on open status, accessibility info, and user-verified data to ensure the suggested toilet is usable *right now*.
- **Empathy & Humor:** a friendly mascot and humorous touches that help users feel understood and at ease.
- **Gamification:** achievements and positive reinforcement to encourage user engagement (turning a stressful necessity into a motivating challenge).
- **Design Aesthetic:** a unique 3D “clay” visual style (per the provided moodboard) that is approachable, warm, and distinctive.

## 2. Target Personas
ToiletNOW’s primary users are people who experience frequent or intense need for a restroom and cannot afford delays. Below are key personas illustrating their needs, behaviors, and motivations:

- **Persona A – “IBS Ian”:** Ian is 28, lives with Irritable Bowel Syndrome, and often has sudden urges to use the bathroom. When out of home, he constantly plans an “escape route” to the nearest toilet. His **needs** include ultra-fast discovery of a nearby restroom and assurance that it’s available and functional. His **behavior** is often panicked in the moment – he won’t fiddle with complex apps, he just hits “find now” and runs. Ian is highly motivated by **reliability and speed**: even a 30-second delay or wrong info can lead to an accident. For Ian, ToiletNOW provides peace of mind by automatically guiding him to a toilet in seconds, which he finds *“incredibly useful” and “comforting… to have the information at my fingertips”* ([
      ‎Flush Toilet Finder & Map on the App Store
    ](https://apps.apple.com/gb/app/flush-toilet-finder-map/id955254528#:~:text=,Thank%20you%20to%20the%20developer)). This reduces his anxiety when going out.

- **Persona B – “Colitis Chloe”:** Chloe is 35 with ulcerative colitis. She carefully plans outings, knowing certain times or foods might trigger urgent needs. She values **information**: she wants to know if a restroom is accessible (she sometimes needs a calmer, cleaner environment due to her condition), if it requires a key or purchase, and its cleanliness or reputation. Her **behavior** involves using the app to save favorite or known toilets (at stores, cafes, etc.) and checking details ahead of time. Her **motivation** is to avoid discomfort and embarrassment; she’ll even walk a bit further to a highly-rated clean toilet rather than risk a dirty one. ToiletNOW’s detailed toilet info and user ratings, plus the ability to save “trusted” locations, address Chloe’s needs by giving her control and confidence.

- **Persona C – “Anxious Allen”:** Allen is 40, without a diagnosed condition, but he has **urgency anxiety** whenever he’s in unfamiliar places. He constantly worries *“what if I need a bathroom suddenly?”* even if it’s unlikely. His **behavior** is to open the app preemptively to see what options are around, and keep it running in the background during an outing. He’s motivated by **peace of mind**. The app’s friendly mascot and humorous tone actually help Allen calm down – turning his focus away from fear. Achievements and the lighthearted approach give him a sense of progress (he feels like he’s “accomplishing” something rather than just worrying). Allen especially appreciates features like offline caching (so he knows he has info even if he loses signal) and the home screen widget in future updates for quick access. 

**Common Needs Across Personas:** All these users need **speedy discovery**, **accurate information (open status, hours)**, and an **easy interface** (since in urgency their cognitive load is high). They also benefit from **emotional support** – feeling that the app “understands” their plight. These insights drive ToiletNOW’s core features and design decisions.

## 3. Core Features

### 3.1 Splash Screen (Welcome)
- **Mascot & Branding:** On launch, users see a whimsical **3D clay-style mascot** centered on a splash screen. This mascot (inspired by clay animation figures) is possibly a friendly character (for example, a cute anthropomorphic toilet paper roll or a toilet) that immediately conveys a light-hearted tone. 
- **Humorous Messaging:** Below the mascot, a brief comforting or funny tagline is displayed (e.g., *“Don’t panic, relief is on the way!”* or *“You’ll make it in time, relax!”*). This sets user expectations that the app is empathetic and fun.
- **Quick Transition:** The splash screen appears very briefly (just long enough to display branding) or until initial location fix is obtained. The goal is to reassure the user and then move *immediately* to the main functionality (since every second counts for an urgent user).
- **Loading Indication:** If there’s any loading needed (e.g., fetching location), use a playful animation – perhaps the mascot doing a quick funny dance or an impatient foot-tap – to indicate progress without stress. This animation remains subtle and short.

### 3.2 Main Map Screen (Instant Nearby Toilet Finder)
This is the **heart of the app**, designed for one-tap navigation to relief.

- **Auto-Location & Map:** Upon app entry (after splash), the app **automatically obtains the user’s GPS location** and loads a **Mapbox** map centered on the user. The map uses a **custom Mapbox style** that aligns with the clay aesthetic – for example, soft pastel backgrounds for land and water, gently rounded or blobby shapes for parks or buildings, and minimal sharp edges. The visual style should feel “soft” and friendly, matching the mascot and overall UI theme.
- **Nearest 3 Toilets Marked:** The app queries its toilet database (online or cached) and immediately identifies the **three nearest open** restrooms. These three are highlighted on the map with distinctive markers (possibly custom 3D pins that look like small clay sculptures – e.g., a tiny clay toilet icon as the marker). By default, the **closest** one (based on distance/travel time and open status) is chosen for navigation. The other two provide alternatives at a glance.
- **Auto-Navigation UI:** As soon as the nearest toilet is found, the app **initiates navigation** to it:
  - A route is drawn on the map from the user’s current location to the toilet location (using Mapbox Directions).
  - The top or bottom of the screen prominently displays an **ETA timer** (e.g., “**2 min 15 sec until destination!**”) that updates as the user moves. This gives a clear indicator of how much longer they need to hold on.
  - Turn-by-turn directions may be shown in a simplified form (e.g., an arrow and distance to next turn), or the user can simply follow the map. (A full voice-guided navigation is a potential future enhancement using Mapbox’s navigation SDK, but initially a simple visual guidance and ETA suffice.)
- **Switching Destinations:** Users can **tap on any of the other two markers** to choose a different toilet if, for example, they prefer the second-closest option (maybe the closest is a gas station but the second is a cafe they trust). Tapping a marker will:
  - Highlight that marker as the new destination.
  - Update the route line and the ETA/distance display immediately to reflect the new choice.
- **Toilet Preview Info:** When tapping a marker (or perhaps on a small banner for the active destination), a **preview card** might slide up, showing key info: name of the location (e.g., “Starbucks on 5th St.”), status (open/closed now), distance, and an option to open full details. This preview uses the **ClayToiletCard** design (see Component Library) for a consistent clay-themed look.
- **Re-routing & Updates:** If the user deviates from the path or if their location updates, the app will automatically re-calculate the route to the chosen toilet. If the chosen toilet becomes unreachable (e.g., suddenly closes or user goes far off course), the app could prompt or automatically switch to the next best option (with a friendly message like “Re-routing to a new restroom, hang tight!”). The focus is that the user **never has to stop and manually fiddle** – the app should seamlessly guide them until they reach a toilet.
- **Map Interactions:** The interface is kept simple due to the urgent context. Pinch-to-zoom and small pan are available if needed, but the UI avoids any clutter like search bars or excessive buttons on this screen. Possibly one icon to access the menu or saved list, but primary interaction is tapping markers.
- **Visual Design:** The map screen’s UI elements (buttons, the ETA banner, etc.) follow the clay design: e.g., the navigation arrow icon might appear as a clay arrow, the bottom info card has rounded claymorphic edges and shadow. The mascot might even pop up as a small overlay (for example, appearing at the side of the screen pointing to the route or sweating in urgency) to add personality, though without blocking crucial info.

### 3.3 Saved Toilets List (Favorites & Frequent Places)
A dedicated screen (or panel) where users can view and manage toilets they have saved for future reference. This helps users plan and quickly access known safe options (useful for persona B and C).

- **List of Saved Locations:** Each saved toilet is displayed as a **card** (using the ClayToiletCard component) containing key details: the place name (e.g., “Work – 3rd Floor Restroom”), distance from current location (if location is known), and maybe a brief descriptor (e.g., “Accessible, Open until 9pm”). The card’s design is fun and functional – **rounded clay-style card** with a subtle shadow, and perhaps a small thumbnail (like a mini map or icon of the location type).
- **Urgency Indicators:** Next to each saved toilet (or integrated into the card) is an **urgency indicator** icon or color. This is a user-defined or app-learned marker of how this location fits their needs:
  - For example, a user might tag some saved toilets as “⭐ Emergency Go-To” (indicating this is a top choice for urgent situations because it’s always open or very close to usual routes) versus “Regular” for ones they use when convenient. The UI could represent this with a small icon (e.g., a red exclamation or a green check) or a colored border on the card (red for emergency-ready, green for normal).
  - Alternatively (or additionally), the urgency indicator might reflect current status relative to user’s urgency: if the user currently indicates they “need a toilet now” (perhaps via an urgency toggle), the app could highlight which saved toilets are **currently open and nearby** (green) versus those that are closed or far (grey). However, primary interpretation is a static tag set by user for their own reference.
- **Mascot Reactions on Cards:** The clay mascot adds personality to this list by giving a **reaction for each saved toilet’s status**:
  - If a saved toilet is currently open and available, the mascot icon on that card might show a **happy/relieved face**.
  - If it’s closed at the moment (based on hours), the mascot could look **disappointed or worried**.
  - For an “emergency” tagged toilet, the mascot might appear **determined or giving a thumbs-up** (ready for action).
  - These visual cues allow a quick scan to see which option “the mascot recommends” at a glance, making the list more lively and quickly informative.
- **Interactions:** Tapping a saved toilet card can offer actions:
  - “Navigate Now” which would take the user to the Main Map screen and plot a route to that saved location immediately.
  - “Details” to see the full toilet details page (hours, ratings, etc.).
  - Possibly “Edit” to change the nickname or tags for that saved location, or “Remove” to delete from saved.
- **Organization:** If the user has many saved toilets, allow sorting or grouping – e.g., by distance (nearest first) or by user-defined categories (work, home, etc.). However, given urgency focus, most users might have a modest list of key go-to places.
- **Empty State:** If no toilets are saved yet, show a friendly message (with the mascot): e.g., the mascot shrugging with text “No favorites yet. You can save a toilet after visiting it!” to encourage using the app and saving reliable locations. Possibly also guide them to use the map to find one and then save it.

### 3.4 Achievements & Gamification
To lighten the mood and incentivize frequent use and contributions, the app features a set of **fun achievements** that users can unlock. This gamification turns the stressful task of finding a toilet into a rewarding game over time.

- **Achievement List:** Users can access a screen showing all available achievements as a collection of **cards or rows** (using the ClayAchievementCard style). Each achievement has:
  - A **fun title** (often a pun or humorous phrase related to toilets or speed). Examples might include:
    - *“First Flush”* – unlocked on finding/navigating to your first toilet successfully.
    - *“Speedy Pooper”* – for reaching a toilet in under 3 minutes from the time of opening the app.
    - *“Marathon”* – for using the app to find a toilet 7 days in a row.
    - *“Halfway There”* – for finding 50 total toilets (halfway to some bigger goal, like 100).
    - *“Local Guide”* – for adding or verifying 5 new toilet locations.
    - (Each achievement’s criteria is clearly stated in the description.)
  - A **clay-style icon** or badge representing it (e.g., a small 3D clay trophy, or a toilet paper roll with a medal, etc.). The clay visuals keep them in the same aesthetic as the rest of the app.
  - A short **description** explaining what the user did to earn it or how to earn if locked.
- **Locked vs Unlocked:** Achievements start in a **locked state**, represented with a greyed-out or dimmed card and a lock icon or the mascot covering his eyes playfully. When unlocked:
  - The card becomes fully colored/brighter, the icon is in full color, and maybe the mascot on that card gives a celebratory reaction (like clapping or a big grin).
  - Possibly a small animation plays when an achievement is unlocked (e.g., confetti or the mascot popping up with a “Congrats!” speech bubble).
- **Progress Tracking:** For achievements that require cumulative actions (like “find 50 toilets”), the app can show progress on that card (e.g., “25/50 toilets found” in smaller text) so users know they are making headway.
- **Notifications & Encouragement:** When a user unlocks an achievement, they receive immediate feedback: an on-screen notification or modal with the mascot celebrating and a message like “Congratulations, you unlocked **Speedy Pooper!** You really don’t waste time!”. The tone remains playful. There may also be gentle encouragement notifications if the user is close to an achievement (“Only 1 more toilet to unlock **First Flush**!”) to drive engagement.
- **Purpose:** These achievements serve two purposes: reward users for using the app (thus encouraging regular use, which incidentally keeps the toilet database fresh via crowdsourcing features), and normalize the experience of urgently seeking a toilet by making a game out of it (helping users feel less embarrassed and more proud of their “accomplishments”). 

### 3.5 Settings Screen
A settings section allows users to customize the app’s behavior and appearance to their liking. All settings interfaces follow the **3D clay design** style for consistency and delight.

- **Theming (Appearance):** Users can toggle between Light, Dark, or System default theme for the app’s UI. The clay aesthetic will adapt to dark mode (e.g., darker background clay colors but still maintaining soft shadows – design will ensure it remains visually pleasing in dark mode). A preview might be shown in the settings of how the mascot or map looks in each theme. *(If the moodboard includes a style guide, this will align with those colors.)*
- **Units & Localization:** An option to choose distance units (Miles or Kilometers). For example, a **picker** styled with ClayPickerStyle allows switching the unit, and the map screen’s distance/ETA will reflect this. Also ensure region-specific settings (the app might later incorporate language options, but MVP can be English-only).
- **Notifications:** Toggle on/off for various notifications:
  - Urgency Reminders (e.g., if the app detects frequent opens, “Add a home screen widget for quick access?”).
  - Achievement alerts (user can disable gamification notifications if they just want utility).
  - New toilet contributions (if user wants to be notified to verify new toilets nearby).
  - This is presented as a list of toggles (using ClayToggleStyle for a friendly, chunky switch design).
- **Privacy & Permissions:** Show status of location permission (enabled/disabled). If disabled, provide a prompt or instructions to enable location for the app to function properly (with perhaps a direct link to iOS settings). The importance of location is high; the UI here will use friendly language (and maybe the mascot with a map icon) to explain why it’s needed.
- **Data Management:** (If applicable) Options to clear downloaded toilet data cache (for offline), or to download region data for offline use (in future, an enhancement).
- **About & Support:** Some basic info like version, a link to an FAQ or support site, and perhaps an option to send feedback. Even here, keep a bit of personality, e.g., show the mascot waving or holding a wrench to indicate support.
- **Settings Visual Design:** The settings list uses custom icons in the clay style. For example, the Notifications option may have a bell icon that looks molded from clay. Each section (Appearance, Units, etc.) might be grouped visually. The overall layout can be a typical iOS Form-style list, but each cell is styled with our custom background and rounded corners. Interactive controls (toggles, pickers) use the custom Clay styles defined in the component library (ensuring even these mundane elements feel on-brand and fun).

## 4. Baseline Features (Competitive Parity)
In addition to the core features above, ToiletNOW will include a set of **baseline capabilities inspired by existing toilet-finder apps** to meet user expectations and industry standards:

- **GPS Location Auto-Detection:** As noted, the app automatically picks up the user’s current location (with permission) to find nearby restrooms. This core functionality is on par with competitors like Flush and SitOrSquat, which emphasize quick location-based results ([The Best Bathroom Locator Apps - National Association For Continence](https://nafc.org/bhealth-blog/the-best-bathroom-locator-apps/#:~:text=Flush%20operates%20worldwide%20with%20190%2C000,when%20cell%20service%20is%20spotty)). If location services are unavailable, the app will allow manual location input as a fallback (e.g., search by address or use last known location).
- **Toilet Detail Pages:** Each restroom in the database has a detailed info page that users can view (likely by tapping on a marker info or a saved item then “Details”). These **toilet detail** screens include:
  - Name and address of the facility (with option to open in Apple Maps or copy address if needed).
  - Opening hours (and indication if it’s open *right now*).
  - User rating or cleanliness score (e.g., average star rating, or percentage of users who marked it clean).
  - Accessibility info: whether it has wheelchair access, requires a key/code, requires a fee, has baby-changing facilities, etc. These are often crucial for users with specific needs and are standard in competitor apps ([The Best Bathroom Locator Apps - National Association For Continence](https://nafc.org/bhealth-blog/the-best-bathroom-locator-apps/#:~:text=allows%20you%20to%20view%20bathrooms,an%20easy%20to%20use%20interface)) ([The Best Bathroom Locator Apps - National Association For Continence](https://nafc.org/bhealth-blog/the-best-bathroom-locator-apps/#:~:text=Flush%20operates%20worldwide%20with%20190%2C000,connection%2C%20allowing%20you%20to%20find)).
  - Perhaps a short description or notes (user-contributed tips like “bathroom is in the back of the store, ask a staff for key”).
  - A button to start navigation to this location (redundant to map tap but useful from list context).
- **User Contributions (Report/Verify):** ToiletNOW relies on a crowd-sourced database of toilets. Users can **report issues or verify information**:
  - If a toilet is missing, users can add it by dropping a pin or entering an address, with details (this might be streamlined for power users or a later update, but basic add is planned).
  - If a toilet is listed but, say, was closed or info is wrong, users can mark it as “Closed” or update details (e.g., change of hours).
  - Verification: If a user visits a toilet and finds the info accurate, they can tap a “Verify” or thumbs-up to increase confidence in that entry.
  - These actions may tie into achievements (e.g., unlocking an achievement for contributing data).
  - Competitors have similar community-driven features (e.g., Flush allows adding toilets and swiping to rate or report ([
      ‎Flush Toilet Finder & Map on the App Store
    ](https://apps.apple.com/gb/app/flush-toilet-finder-map/id955254528#:~:text=,improve%20the%20app%20for%20everyone))), so we aim for at least this level of functionality.
- **Offline Availability Caching:** Recognizing that emergencies can happen where connectivity is poor, the app will have an **offline mode**. This means it caches toilet locations and details for areas the user has recently viewed or favorited:
  - At minimum, the last known vicinity (say a few-mile radius around last use or any saved regions) is stored locally. If the user opens the app with no internet, it can still show nearest toilets from the cached data.
  - The Mapbox map itself can have an offline style or default to a simple grid if tiles aren’t cached, but at least location markers and basic routing (if possible with cached coordinates) should function.
  - This mirrors competitor features like Flush’s offline support (Flush works even without internet by using stored data) ([The Best Bathroom Locator Apps - National Association For Continence](https://nafc.org/bhealth-blog/the-best-bathroom-locator-apps/#:~:text=others%20listed%20here%2C%20you%20can,when%20cell%20service%20is%20spotty)), ensuring ToiletNOW isn’t unusable in low-signal scenarios – a critical advantage for user trust.
- **Search & Filter (Enhancement):** While the primary use case is “find nearest automatically,” the app will also allow a manual search for planning purposes. Users can search for toilets in a different location (e.g., “near Address X” or browse the map freely). They can also apply **filters** when searching or browsing the map/list:
  - Filter by accessibility (wheelchair accessible only), by availability of certain amenities (e.g., baby changing table, as noted in competitor apps ([The Best Bathroom Locator Apps - National Association For Continence](https://nafc.org/bhealth-blog/the-best-bathroom-locator-apps/#:~:text=allows%20you%20to%20view%20bathrooms,an%20easy%20to%20use%20interface))), or by type (public park toilet vs. restaurant vs. gas station).
  - Filter by quality rating (e.g., show only toilets rated 3 stars or higher for cleanliness) especially useful for those who can afford a bit more time to choose a cleaner option.
  - These filters ensure users like Chloe can customize results to their preferences. (Filters may not be front-and-center on the urgent flow, but are accessible in a secondary flow or settings.)

*By including the above baseline features, ToiletNOW ensures it meets and exceeds what users might have seen in other apps, building credibility and completeness of the solution.* Many of these (like detail pages, contributions, offline mode) also lay the groundwork for the **Pro features and future improvements** outlined later.

## 5. Pro Features (Premium Tier)
ToiletNOW will offer a one-time **Pro upgrade** (via In-App Purchase) to unlock enhanced functionality. Pro features are designed for power users or those who want extra assurance and convenience. They provide added value without crippling the free version’s essential use.

- **AI-Powered Toilet Recommendations:** Pro users get access to a smart assistant that analyzes all nearby toilets and surfaces the **most reliable and cleanest option**. This goes beyond just nearest distance – it considers factors like user ratings, number of recent verifications, cleanliness reports, and even real-time data if available. The AI can provide a short **summary or recommendation**: e.g., *“The restroom at Central Mall (5 min away) is your best option: very clean and usually not crowded.”* This summary gives **peace of mind** to anxious users who prioritize quality. It might use machine learning to weigh factors, or natural language generation to explain why a choice is optimal. Essentially, it’s like having an expert local guide within the app. (In the UI, this could appear as a highlighted “AI Top Pick” card on the map screen or a dedicated button “Ask ReliefAI” that then highlights a choice and shows the summary.)
- **Advanced Filtering & Sorting:** Pro users can unlock advanced filters like “show only 24/7 restrooms” or sort nearby results by rating or cleanliness score instead of just distance. The AI can also learn the user’s preferences over time (e.g., always prefers higher cleanliness even if slightly farther) and automatically adjust suggestions.
- **Ad-Free Experience:** *(If the free version contains ads or limitations.)* Pro users enjoy the app without any ads or interruptions. (Even if ads are minimal in free, this can be an incentive to upgrade for heavy users.)
- **Exclusive Achievements or Content:** To sweeten the deal, Pro might include some exclusive achievement badges (like “Pro Supporter”) or early access to new features in future (e.g., first access to Apple Watch app).
- **One-Time Fee Details:** The Pro upgrade is a **one-time purchase** (no subscription), making it attractive for users who typically don’t like recurring costs. Pricing will be set to a reasonable value (TBD, e.g., $4.99 or $9.99 range) given the niche but important functionality. Emphasize that with one payment, they get lifetime access to all current and future pro features on their account. This aligns with competitor models (e.g., some apps have a paid version with extra features or no ads).
- **Rationale:** These features are premium because they involve additional computing (AI analysis) and cater to users who either have very frequent needs or just desire maximum reassurance. However, even free users get core functionality (find nearest toilet), so the app remains genuinely helpful without forcing payment. Pro is about **convenience and confidence** – knowing not just where *a* toilet is, but where the *best* toilet is.

## 6. Design & UX Guidelines
The design of ToiletNOW is guided by a playful yet **user-centric** approach, heavily influenced by the 3D clay-style visual theme in the provided moodboard. This section outlines the visual style and user experience principles:

**Visual Theme – “3D Clay” Aesthetic:**
- The entire UI adopts a **claymorphic design language**. Elements appear soft, slightly rounded, and tactile – as if molded from clay. This is achieved with gentle **outer shadows and inner shadows** to create depth (per claymorphism techniques) while using bright but soothing colors.
- **Color Palette:** Favor **pastel and friendly colors**. For example, a calming light blue or turquoise for primary backgrounds (evoking water or cleanliness), warm beige or peach for secondary elements, and pops of soft orange or green for highlights/CTA buttons. Colors should be high-contrast enough for accessibility, but avoid harsh neon or pure black; instead use deep navy or purple for dark text against light backgrounds. The moodboard likely showcases a set of these colors – those will be our reference for exact hues.
- **Mascot Integration:** The 3D mascot (as seen in the moodboard) is a central element of the brand. It appears not only on splash, but throughout the UI in small doses (without overwhelming functionality). Its style is a **clay render** with a handmade charm (slight imperfections make it endearing). The mascot’s color scheme should complement the app palette (e.g., if the mascot is a clay figurine, ensure it’s visible on app backgrounds). We will prepare multiple poses/expressions of the mascot to use contextually (happy, urgent, relieved, celebratory, thinking, etc.).
- **Typography:** Use a **friendly, rounded sans-serif font** for all text to match the approachable vibe. The typeface should be highly legible under stress (no fancy cursive or overly decorative fonts). Examples might include **SF Rounded**, **Nunito**, or **Quicksand**, but final choice will be based on the moodboard’s suggestion. Headers might be slightly bolder and larger, but still rounded. Body text is clean and readable. We also ensure the font is a standard iOS-compatible one or bundled with the app to avoid issues.
- **Iconography:** All icons (for navigation, settings, achievements, etc.) are custom-designed in the same clay style or at least a flat style that matches. They might appear slightly 3D or just use the same color palette and round shapes. For instance, the location pin, the trophy icon for achievements, the gear for settings – each could be a small clay-modeled graphic, possibly extracted from the 3D design or illustrated to mimic it.
- **Animations & Micro-interactions:** The UI will incorporate subtle **animated feedback** to delight and inform the user:
  - e.g., when the user taps “navigate”, the map marker might do a little bounce or the route line might animate into view.
  - When an achievement is unlocked, confetti might pop and the mascot does a celebratory jig.
  - Toggle switches in settings might slide with a soft “squish” effect, as if a clay object is being pressed.
  - These animations should be quick (not hindering the user’s task) and can be implemented with SwiftUI’s animation capabilities or Lottie files for more complex mascot animations.
- **Layout & Components:** The design should feel **airy and not cluttered**. Use of whitespace (or rather, “clayspace”) is important to avoid overwhelming a panicked user. Each screen has a clear primary action. Buttons are large enough to tap easily, given users might be in a hurry and not precise. We maintain standard touch target sizes, and larger if possible for critical actions (like the “Navigate” button or switching toilet selection on the map).
- **Accessibility & Contrast:** Despite the playful style, we must ensure text and icons have sufficient contrast with backgrounds (meeting WCAG AA at minimum). The claymorphic design will be adjusted to ensure shadows and colors do not reduce readability (for example, using outline or stroke on text over complex backgrounds if needed). The app will support iOS Dynamic Type to a reasonable extent so that users who increase text size can still use it (especially important for older users or those with visual impairments).
- **Consistent Mood:** Every aspect of the design should consistently convey **reliability, friendliness, and a dash of humor**. The moodboard’s imagery guides the exact look, but the general vibe is one of optimism and approachable help. Even error states or alerts (like “Location permission denied” or “No toilets found”) will be phrased gently and perhaps accompanied by a concerned mascot icon, plus a clear next step for the user.

**User Experience Considerations:**
- **Minimal Input for Urgency:** The UX is optimized so that in an urgent situation, the user essentially just has to **open the app and go**. We avoid any roadblocks (no sign-up required at launch, no lengthy tutorial on first open – perhaps just a one-time overlay that the user can skip). If any tutorial or onboarding is needed, it will be concise and humorously worded, or integrated with the mascot’s guidance.
- **Primary Actions Emphasized:** On each screen, the most likely action is visually highlighted. On the map screen, the navigation/route info is front and center (because the main “job” is guiding them). On the saved list, the action to navigate to a saved place is obvious on each card. In achievements, perhaps the action is simply acknowledging them or going back to navigation.
- **Emotional Design:** Because our users may be in distress, the UX uses *emotional design principles*: empathy (we show messages that validate their situation, e.g., “Need to go? We’ve got you.”), a bit of joy (the mascot’s presence), and positive reinforcement (achievements, friendly language). The tone of copy throughout is **casual, caring, and slightly cheeky** – e.g., using phrases like “Hang in there!” or “You did it!” where appropriate.
- **Error Handling & Edge Cases:** If something goes wrong (no GPS, no toilets found in area, etc.), provide a fallback and keep the user calm. For instance, “Hmm, I can’t find any toilets nearby right now. Deep breath – maybe try searching an area or check if places like cafes are open.” Always offer a next step or suggestion, rather than a dead-end error. Use the mascot to soften the blow (maybe it appears with a thinking pose).
- **Performance:** Ensure the app runs smoothly on iPhone devices that the target users might have (potentially including older models for some). Map performance and loading times are critical – use efficient Mapbox queries (e.g., only fetch the necessary nearby points, use clustering if needed for many points but in our urgent use, only a few closest matter). The UI animations should be optimized so they don’t stutter when the device is under pressure (e.g., while GPS and network are also working).
- **Testing with Users:** We would ideally do some usability testing with individuals from the target demographic (IBS patients, etc.) to validate that the flow is indeed as stress-free as possible. Their feedback on wording, reaction to the mascot, and any missing information will refine the UX further.

* ([image]()) **ToiletNOW Moodboard & Style Inspiration:** This image showcases the app’s envisioned visual style – from the 3D clay mascot character to the soft, rounded UI components and playful color palette. All design elements in the PRD are aligned with this aesthetic to ensure a cohesive look and feel.*

## 7. Technical Implementation Notes
To deliver the above features, we outline the technical approach and any significant considerations for the iOS app implementation:

- **Platform & Framework:** The app will be built for **iOS (iPhone)** using **Swift** and **SwiftUI** for most of the interface. We will leverage SwiftUI’s modern UI capabilities for quick design iterations and the declarative UI structure (especially fitting for forms, lists, etc., like the settings and achievements screens). The architecture can follow MVVM (Model-View-ViewModel) to separate logic from UI, which works well with SwiftUI.
- **Mapbox Integration:** For the map and navigation functionality, we will integrate the **Mapbox SDK** (Mapbox Maps and possibly Mapbox Navigation for routing). Mapbox is chosen for its custom styling ability (to apply our clay theme) and offline map support:
  - We will obtain a Mapbox access token and design a custom map style in Mapbox Studio to match our aesthetic (pastel colors, custom icons for points). This style will be loaded in the app.
  - The map view itself is a UIKit component (`MGLMapView` or newer Mapbox Maps SDK view). To use it in SwiftUI, we’ll create a **`UIViewRepresentable`** wrapper (`ClayMapboxView`) that allows embedding the map seamlessly in SwiftUI views. This wrapper will handle setting the map style, initial camera position (user location), and adding markers.
  - **Location & Permissions:** Use CoreLocation to get the user’s location. We’ll add the required keys in Info.plist (NSLocationWhenInUseUsageDescription) with a friendly justification (“To find the nearest toilets for you, fast!”). The permission request will trigger on first launch. We plan to request “When in Use” permission (background location is not needed for MVP, unless we later want to proactively alert user of nearby toilets).
- **Navigation & Routing:** For route calculation, the plan is to use **Mapbox Directions API** or the offline SDK:
  - When the nearest toilets are identified (likely by querying a local DB or API for toilets around coordinates), we then calculate travel time to each (either using straight-line approximations or a routing API call). The shortest travel time one is auto-selected.
  - Upon selection or auto-select, we fetch a route polyline. This can be done via Mapbox’s Directions API (internet required) or using an on-device routing engine if available (Mapbox Navigator).
  - The route is drawn on the map (as a Polyline overlay) with a distinct color that fits the theme (maybe a bright clay-orange line with a slight glow).
  - **ETA Timer:** We will compute ETA from the route data (distance / speed or using provided duration from API). This needs to update – so as the user moves, either we continuously recalc by tracking user location along route and subtracting distance traveled, or periodically request an updated route if off-route.
  - Rerouting logic: Using the Mapbox Navigation SDK can provide automatic reroute if the user goes off course. If we do a simpler implementation, we can monitor if user strays a certain distance from the route and then trigger a fresh route calculation to the same destination (or if that destination is now significantly farther than an alternative toilet, possibly suggest switching).
  - If implementing turn-by-turn, Mapbox Navigation SDK provides a lot out-of-the-box (voice prompts, step-by-step instructions) but it may be overkill for v1. We likely will implement a simpler custom navigation overlay due to time, focusing on the map and ETA.
- **Data: Toilet Database:** We need a source of toilet locations. Options include:
  - Using an existing dataset (like OpenStreetMap toilet data or the data behind apps like “Where Is Public Toilet”) – but licensing and completeness should be checked. Alternatively, starting with a smaller curated dataset for a region and relying on user contributions to grow.
  - In any case, the app will have a local database (SQLite via Core Data or Realm) to store toilet entries (with fields: name, lat/long, hours, attributes like accessibility, rating, etc.). This allows offline queries and fast access.
  - We will likely have a backend server or use a third-party API to fetch toilets around a location on demand, which then get cached locally. The first time in an area might require network, but thereafter cached.
  - User contributions (add/edit) would be sent to the backend or stored locally pending approval, depending on our approach. For MVP, we might allow adding locally (user’s own list) if we don’t maintain a global database yet.
- **State Management:** SwiftUI will manage view state. For example, an `AppViewModel` might hold the current user location, list of nearby toilets, current destination, etc. This can be observed by the SwiftUI views (map screen, etc.) to update UI reactively (e.g., when `nearestToilets` array updates with results, the map markers appear).
- **SwiftUI Components:** We will implement custom components as described in the component library section (ClayBackground, ClayToggleStyle, etc.) likely as SwiftUI Views or ViewModifiers. These ensure consistent design throughout. For instance, ClayToggleStyle will be a struct conforming to ToggleStyle that we apply globally or to specific toggles.
- **App Lifecycle & Launch:** The app will launch to Splash -> then immediately to Map screen. If location permission was granted previously, we go ahead. If not, on first launch we might show an onboarding screen where the mascot explains why location is needed and a big “Enable Location” button triggers the permission dialog. We want the user to grant it because the core function won’t work otherwise. If they decline, we present an option to manually search or a very limited mode, and remind them to enable location for full functionality (likely via a persistent banner on the main screen).
- **Performance & Memory:** The map can be memory intensive, but since we only show a small area and a few markers, it should be fine. We will use instrumentation to ensure no memory leaks (especially with the Mapbox integration through UIViewRepresentable, we must handle view updating carefully to avoid creating multiple map instances).
- **Testing:** We will test on various simulators and devices. Particularly, test scenarios like:
  - Cold launch and immediate navigation (to ensure no crashes or delays).
  - No internet scenario (does it use cached data gracefully?).
  - Location permission denied (does the app handle it without freezing the core flow).
  - UI appearance in Light vs Dark mode.
  - SwiftUI view updates (achievements unlocking should refresh the achievements list UI, etc.).
- **Maps and App Store Compliance:** We ensure that using third-party map (Mapbox) is compliant with App Store (it is; many apps use Mapbox). We will also include an attribution line for Mapbox as required (maybe in small text on the map screen or in settings “Map data © OpenStreetMap contributors, Imagery © Mapbox” or similar).
- **SwiftUI & iOS Compatibility:** Target iOS 15+ (or iOS 16+) to utilize the latest SwiftUI features and ensure almost all active devices are supported. The app will be optimized for iPhone; iPad can run it but it’s not a primary target (we can allow iPad installation but simply scale the UI).

By adhering to these technical notes, the development team can implement the features in alignment with the design and product vision. Close collaboration between developers and designers will ensure the claymorphic style is not only beautiful but also technically feasible (e.g., using assets for the 3D mascot in various sizes, ensuring the custom UI elements behave well on different screen sizes, etc.).

## 8. Component Library (UI Components & Styles)
To maintain consistency in the app’s look and feel, we will develop a reusable component library, with each component following the clay design language. Key components include:

- **`ClayBackground()`** – A view that renders the app’s background. This could be a simple colored background (e.g., a subtle gradient or a solid pastel from the palette) possibly with decorative elements like abstract clay blobs or shapes at the corners as seen in the moodboard. It will be used as the base for screens and modals to ensure a consistent backdrop.
- **`ClayMapboxView()`** – A SwiftUI wrapper for the Mapbox map. It handles displaying the map with the custom style and adding the specific annotations (toilet markers). It exposes bindings or callbacks for events (e.g., user tapped a marker) so the SwiftUI parent view (MainMapScreen) can update state accordingly. It might also handle minor UI overlays on the map if needed (like the current location dot styled in our theme).
- **`ClayToiletCard()`** – A SwiftUI view that represents a toilet location in card format. Used in lists (Saved Toilets, search results, or even a pop-up preview on the map). It will include:
  - A container with a **rounded rectangle shape**, filled with a clay-like background color (e.g., off-white or light pastel) and a slight shadow for depth.
  - Text labels for name and perhaps a subtext (distance or status).
  - If needed, small icons for features (like a wheelchair icon if accessible, a clock if limited hours).
  - Space for the **mascot reaction icon** and/or urgency indicator icon as described in Saved Toilets.
  - This component will be designed to flexibly resize or stack content depending on context (for example, a larger version on a detail page vs a compact version in a list).
- **`ClayAchievementCard()`** – Similar structure to the ToiletCard but for achievements. It might have:
  - An icon (achievement image) on one side, and title & description text on the other.
  - Possibly a lock overlay if not unlocked.
  - A distinctive color or style per achievement category (if we categorize them) but all still within the clay palette.
  - When an achievement is unlocked, this card could subtly animate or glow to draw attention.
- **`ClayToggleStyle()`** – A custom ToggleStyle for SwiftUI toggles (the on/off switches in Settings). Instead of the default iOS toggle, this style will create a toggle with:
  - A track that looks like a rounded capsule, colored in a clay pastel (e.g., grayish when off, bright clay-green or blue when on).
  - A knob that could be a little circle that appears slightly raised (with a drop shadow) as if it’s a small clay ball. When toggled, it might even use a spring animation to give a bouncy feel.
  - We ensure the toggle is still clearly indicating state (color change and position of knob).
- **`ClayPickerStyle()`** – Custom styling for pickers or selection controls. For example, if using a SwiftUI `Picker` for unit selection (Miles/KM) or theme:
  - We might implement a **segmented control** style (two buttons) that are clay-styled (rounded, and the selected segment is more elevated).
  - Or use a wheel picker for larger selections but overlay a clay texture or color on the wheel background.
  - The style ensures that these controls match our overall UI (maybe a bit larger text, colored selection).
- **`MascotIcon(context: MascotEmotion)`** – A view that displays the mascot in a specific pose or expression. Instead of scattering multiple image assets usage, we encapsulate it:
  - `MascotIcon` might take an enum like `.happy`, `.panic`, `.celebrate`, `.neutral`, etc., and display the corresponding image or even an Lottie animation of the 3D mascot doing that expression.
  - This component will be used in various places: e.g., in a small size next to text (like on a Saved Toilet card), or large on splash or empty states.
  - By centralizing it, we ensure if we ever update the mascot graphics, it propagates everywhere consistently.
- **Typography & Style Constants:** (Not a visible component, but part of the design system) – We will define a set of font styles (e.g., Title, Subtitle, Body, Caption) with the chosen font and sizes to use throughout. Also define standard spacings, corner radius sizes (likely a consistent corner radius that gives the “soft” look, maybe 16 or 24 points), and shadow styles (e.g., one for cards, one for floating buttons) to reuse with these components.
- **`ClayButtonStyle` (Potential):** If we have buttons (like a big “Start” or “Navigate” button in some context), we might define a style for buttons too. This would include a background color from our palette, maybe a slight 3D effect (shadow), and a highlight animation on tap (like squishing down).
- **Color Extensions:** We will likely extend `Color` in SwiftUI to include our custom palette (e.g., `Color.clayBlue`, `Color.clayPeach`) drawn from the moodboard, to be used in these components.

All these components ensure that developers can **build interfaces quickly without repeatedly coding styles**, and any change in aesthetic can be done by tweaking the component once (DRY principle). It also makes it easy to maintain consistency: e.g., every card has the same corner radius and shadow because they use ClayToiletCard/AchievementCard.

Additionally, by naming components clearly (ClayXYZ), we keep the theme front-of-mind during development, which helps maintain the brand identity through to the final product.

## 9. Future Considerations
Looking beyond the initial release, we have identified opportunities to expand ToiletNOW’s functionality and ecosystem. These are not in the current scope but are worth noting for future roadmaps:

- **Home Screen Widget:** Develop an iOS widget for quick-glance information. A **“Nearest Toilet” widget** could show: the name of the closest open toilet and the current ETA to get there (updating as the user moves), along with perhaps the mascot icon as an indicator (green happy if all good, or red worried if none nearby). Tapping the widget would launch the app and immediately start navigation. This is extremely useful for users who want that instant awareness or are frequent users – they wouldn’t even have to open the app to see if a toilet is around. Widget comes in handy especially if the user is using other apps and suddenly needs to find a restroom – a left-swipe to widgets could show them info at a glance.
- **Apple Watch Integration:** An Apple Watch companion app or complication can be a lifesaver for someone on the move. The watch app could do a one-tap navigation to the nearest toilet from the wrist, with haptic feedback guiding the user (taps as they need to turn, etc., if using Apple’s directions). Even a simple display of “Nearest toilet: 0.3 miles, 2 min away” with a arrow direction on the watch can help when pulling out a phone is less convenient (or too slow). We’d leverage Apple’s Map integration on watch or send the route from phone to watch. A complication (watch face widget) could always display an icon and distance to the nearest known toilet in real-time.
- **Crowd-Sourced Quality Scoring:** As user contributions grow, we can implement a more robust **toilet quality scoring system**. Beyond binary clean/dirty, this could be a 5-star rating or multiple criteria (cleanliness, availability, queues, etc.). Over time, the app can compute a **“Reliability Score”** for each toilet – factoring in how often it’s open as expected, how often users successfully use it, cleanliness ratings, and recency of data. This score can be displayed to users to help them choose (especially if there are multiple options – they might choose one with a higher score over a slightly closer one). It will also feed into the Pro AI recommendation algorithm, making it smarter. Additionally, to encourage participation, we might add **user profiles and a contribution system**: users get points or even separate badges for contributing data (like verifying toilets, adding new locations, or rating cleanliness). This fosters a community around the app similar to how Waze or Google Maps leverages user reports.
- **Database Expansion & Partnerships:** We might partner with organizations like the Crohn’s & Colitis Foundation or city governments to integrate official public toilet data or “Can’t Wait” card locations. Perhaps tie in the **“We Can’t Wait” restroom network** (businesses that open restrooms for those with medical cards) ([We Can't Wait: Restroom Finder App | Crohn's & Colitis Foundation](https://www.crohnscolitisfoundation.org/patientsandcaregivers/wecantwait#:~:text=We%20Can%27t%20Wait%3A%20Restroom%20Finder,and%20helps%20identify%20sympathetic)) to mark those in our app for users who have those access cards. Such partnerships could enrich the data and also broaden our user base (foundation could promote the app).
- **Internationalization:** Expand language support and local toilet data globally. IBS/IBD is worldwide; making sure the app works in multiple countries (units, languages, region-specific data like in some places public toilets are more common, in others rely on businesses).
- **Enhanced Navigation Features:** In future versions, integrate full **turn-by-turn voice navigation** within the app for a truly hands-free experience. We could have the mascot’s voice (if we want to personify it) or a calm voice guiding the user. Also possibly AR navigation (holding up phone to see arrows overlaid on the real world) for urban environments – though that’s a stretch goal for fun.
- **Integration with Maps Apps:** Offer an option to push the destination to other map apps (Apple Maps, Google Maps) if the user prefers their navigation, though our goal is to keep them in-app for the seamless experience. Still, having a share to Apple Maps or a deep link is a nice touch.
- **Emergency Mode:** A possible future concept where if a user hits a special “Panic button” (maybe they are in a critical situation), the app could broadcast their location to a friend or play a certain sound (some users carry “Can’t wait” cards; similarly, an app could display a quick message on screen to show to a business staff asking for restroom use urgently). This is more speculative but aligns with helping users in distress beyond just directions.
- **Continuous Improvement via Analytics:** We plan to gather anonymized usage data (with user consent) to see how users behave – e.g., do they often switch away from the default suggestion? Do they use the saved list or just always go with auto? This can inform future improvements, like refining the algorithm for the default toilet choice or improving the UI where users seem confused.

Each of these future considerations will enhance ToiletNOW’s value proposition: from making it more accessible in daily life with widgets and wearables, to building a stronger community data backbone with crowd-sourcing, to leveraging technology advancements (AR, voice) to stay ahead of the curve. We will prioritize these based on user feedback after the initial launch – ensuring that future development continues to put the user’s urgent needs and peace of mind at the forefront.

